<%= bootstrap_form_for(current_request, request_form_options) do |f| %>
  <% unless current_request.persisted? %>
    <%= render partial: 'hidden_form_fields', locals: { f: f } %>
  <% end %>

  <%= render partial: 'shared/item_selector', locals: { f: f } %>

  <%= render partial: 'shared/item_comment', locals: { f: f } %>

  <%= render partial: 'form_additional', locals: { f: f } %>

  <div class="alert alert-warning">
    <%= render partial: 'destination_selector', locals: { f: f } %>

    <% if current_request.requires_needed_date? %>
      <div class="form-group">
        <%= f.label :needed_date, class: "#{label_column_class} required control-label" %>
        <div class='<%= content_column_class %>'>
          <%= f.date_field_without_bootstrap :needed_date, class: 'form-control', required: true, min: Time.zone.today , data: { request_type: current_request.type.underscore } %>
          <% if current_request.holdings_object.library_instructions.present? %>
            <p class='help-block'>
              <%= current_request.holdings_object.library_instructions[:text] %>
            </p>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>

  <% if current_request.request_commentable? %>
    <%= f.text_area :request_comment, rows: 3 %>
  <% end %>

  <%= render partial: 'submit_request_buttons', locals: { f: f } %>
<% end %>
