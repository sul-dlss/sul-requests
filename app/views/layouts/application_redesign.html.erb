<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="description" content="Stanford University Libraries' application to request materials">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">

    <title><%= yield(:page_title).blank? ? t('shared.default_page_title') : yield(:page_title) %></title>
    <%= favicon_link_tag 'favicon.ico' %>
    <%= stylesheet_link_tag "application" %>
    <%= stylesheet_link_tag "https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700" %>
     <!-- Google tag (gtag.js) -->
     <script async src="https://www.googletagmanager.com/gtag/js?id=G-8H7ZHEYXVM"></script>
     <script>
       window.dataLayer = window.dataLayer || [];
       function gtag(){dataLayer.push(arguments);}
       // To turn off debug mode, exclude the parameter altogether (cannot just set to false)
       // See https://support.google.com/analytics/answer/7201382?hl=en#zippy=%2Cgoogle-tag-websites
       args = <%= Settings.analytics_debug %> ? {"debug_mode": true} : {};
       gtag('js', new Date());
       gtag('config', 'G-8H7ZHEYXVM', args);
     </script>
    <%= csrf_meta_tags %>
    <%= content_for(:head) %>
    <%= javascript_include_tag "application", "data-turbo-track": "reload", defer: true %>
  </head>

  <body class="d-flex flex-column min-vh-100" data-controller="analytics">
    <nav id="skip-link" class="visually-hidden-focusable" aria-label="Skip links">
      <div class="container-xl">
        <a href="#main" class="element-invisible element-focusable" data-turbo="false">Skip to main content</a>
      </div>
    </nav>
    <header>
      <div class="identity-bar">
        <div class="container">
          <a class="su-brand-bar__logo" href="https://www.stanford.edu">Stanford University</a>
        </div>
      </div>
      <%= render 'shared/sul_header_redesign' %>

      <!-- Application header -->
      <%= render ApplicationMastheadComponent.new(application_name: 'My Library Account', classes: 'bg-dark bg-cardinal') do |component| %>
        <% if sso_user? %>
          <% component.with_nav_item(classes: ['dropdown']) do %>
            <a class="nav-link dropdown-toggle fw-semibold" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Requests
            </a>
            <ul class="dropdown-menu">
              <li><%= link_to 'Draft requests', draft_aeon_requests_url, class: 'dropdown-item' %></li>
              <li><%= link_to 'Submitted requests', submitted_aeon_requests_url, class: 'dropdown-item' %></li>
            </ul>
          <% end %>

          <% component.with_nav_item do %>
            <%= link_to 'Appointments', aeon_appointments_url, class: 'nav-link fw-semibold' %>
          <% end %>
        <% end %>
      <% end %>
    </header>
    <main id="main" class="flex-fill container my-3">
      <%= render 'shared/flashes' %>
      <%= yield %>
    </main>
    <footer>
      <%= render 'shared/su_global_footer' %>
    </footer>
  </body>
</html>
